<!DOCTYPE html>
<html lang="es">
<head>
<meta charset="UTF-8">
<title>Dashboard Administrativo</title>

<style>
:root{
    --bg-dark:#0a0a0a;
    --sidebar:#151a2d;
    --accent:#7b2ff7;
    --accent2:#c084fc;
    --card:#111;
    --text:#fff;
    --hover:#1e1e40;
}

body {
    margin:0;
    font-family:"Poppins", Arial, sans-serif;
    background: var(--bg-dark);
    display:flex;
    height:100vh;
    overflow:hidden;
    color: var(--text);
}

/* SIDEBAR */
.sidebar {
    width:260px;
    background: var(--sidebar);
    display:flex;
    flex-direction:column;
    padding:20px 0;
}

.sidebar h2 {
    text-align:center;
    margin-bottom:20px;
    font-size:22px;
    color: var(--accent2);
}

.menu a {
    padding:14px 25px;
    display:block;
    color: #dcdcdc;
    text-decoration:none;
    font-size:15px;
    transition:0.2s;
}

.menu a:hover {
    background: var(--hover);
    color: var(--accent2);
}

/* TOPBAR */
.topbar {
    background: var(--card);
    padding: 15px 20px;
    display:flex;
    justify-content: space-between;
    align-items: center;
    box-shadow:0 2px 5px rgba(0,0,0,0.3);
}

.logout-btn {
    background: #ff4757;
    padding: 8px 16px;
    color: white;
    border-radius: 8px;
    text-decoration: none;
}

/* CONTENIDO */
.content {
    flex:1;
    display:flex;
    flex-direction:column;
    overflow-y:auto;
}

.container {
    margin:25px;
    background: var(--card);
    padding:25px;
    border-radius:12px;
    box-shadow:0px 3px 12px rgba(0,0,0,0.25);
    color: var(--text);
}

table {
    width:100%;
    border-collapse:collapse;
    margin-top:15px;
}

th, td {
    padding:12px;
    border-bottom:1px solid #222;
}

th {
    background: #1a1a1a;
    text-align:left;
}

tr:hover {
    background: var(--hover);
}

.btn-delete {
    padding:6px 12px;
    background: #ff4f70;
    color:white;
    border:none;
    border-radius:5px;
    cursor:pointer;
}

/* TITULOS SECCIONES */
h3{
    color: var(--accent2);
}
</style>
</head>
<body>

<!-- SIDEBAR -->
<div class="sidebar">
  <h2>‚ö° Admin Panel</h2>
  <div class="menu">
    <a href="#" onclick="mostrar('Usuarios')">üë• Usuarios</a>
    <a href="#" onclick="mostrar('Inventario')">üì¶ Inventario</a>
    <a href="#" onclick="mostrar('Reservas')">üóìÔ∏è Reservas</a>
    <a href="#" onclick="mostrar('Canciones')">üéµ Canciones</a>
    <a href="#" onclick="mostrar('Horario')">‚è∞ Horario</a>
  </div>
</div>

<!-- CONTENIDO -->
<div class="content">
  <!-- TOP BAR -->
  <div class="topbar">
      <h2 id="tituloActual">Usuarios</h2>
      <a href="../backend/logout.php" class="logout-btn">Cerrar sesi√≥n</a>
  </div>

  <!-- CONTENEDOR PRINCIPAL -->
  <div class="container" id="contenido">

      <!-- USUARIOS -->
      <div id="seccionUsuarios">
        <table>
          <thead>
            <tr>
              <th>ID</th>
              <th>Nombre</th>
              <th>Email</th>
              <th>Acciones</th>
            </tr>
          </thead>
          <tbody id="tablaUsuarios">
            <tr><td colspan="4">Cargando usuarios...</td></tr>
          </tbody>
        </table>
      </div>

      <!-- INVENTARIO -->
      <div id="seccionInventario" style="display:none;">
        <h3>üì¶ Inventario</h3>
        <p>Aqu√≠ puedes listar, agregar o editar productos.</p>
      </div>

      <!-- RESERVAS -->
      <div id="seccionReservas" style="display:none;">
        <h3>üóìÔ∏è Reservas</h3>
        <p>Lista y administra reservas de clientes.</p>
      </div>

      <!-- CANCIONES -->
      <div id="seccionCanciones" style="display:none;">
        <h3>üéµ Canciones</h3>
        <p>Controla la lista de reproducci√≥n del club.</p>
      </div>

      <!-- HORARIO -->
      <div id="seccionHorario" style="display:none;">
        <h3>‚è∞ Horario</h3>
        <p>Configura horarios de funcionamiento y turnos.</p>
      </div>

  </div>
</div>

<script>
function mostrar(seccion){
  const secciones = ["Usuarios","Inventario","Reservas","Canciones","Horario"];
  document.getElementById("tituloActual").textContent = seccion;

  secciones.forEach(s=>{
    const div = document.getElementById("seccion" + s);
    if(div) div.style.display = (s === seccion) ? "block" : "none";
  });
}

/* CARGAR USUARIOS */
document.addEventListener("DOMContentLoaded", async () => {
  const tabla = document.getElementById("tablaUsuarios");
  const response = await fetch("http://localhost/Login/backend/getUsers.php");
  const data = await response.json();

  if(data.length===0){
    tabla.innerHTML=`<tr><td colspan="4">No hay usuarios registrados.</td></tr>`;
    return;
  }

  tabla.innerHTML="";
  data.forEach(user=>{
    const tr=document.createElement("tr");
    tr.innerHTML=`
      <td>${user.id}</td>
      <td>${user.name}</td>
      <td>${user.email}</td>
      <td>
        <button class="btn-delete" onclick="deleteUser(${user.id})">Eliminar</button>
      </td>
    `;
    tabla.appendChild(tr);
  });
});

/* ELIMINAR USUARIO */
async function deleteUser(id){
    if(!confirm("¬øSeguro que deseas eliminar este usuario?")) return;
    const response = await fetch("http://localhost/Login/backend/deleteUser.php?id="+id);
    const result = await response.text();
    if(result==="OK"){ alert("Usuario eliminado"); location.reload(); }
    else alert("Error: "+result);
}
</script>

</body>
</html>
